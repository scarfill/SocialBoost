(function(w,d,r,index){var j=0;var e=r.elusive;var S=r.Snippet;var ssAKey='chmln:_account';var ssDKey='chmln:_debug';if(r.root){return;}else if(S&&!(S.mode==='user'&&r.mode==='admin')){return;}else if(/user/.test(e)){return(r.isDisabled=true);}r.fastUrl||(r.fastUrl='https://fast.trychameleon.com/');S=S||(r.Snippet={});S.version={git:'148148422',when:"2025-03-29T04:42:23.018Z"};S.urls={fast:r.fastUrl};S.debug=_sdi;let acct=_afs();return acct?admin(acct):user();function admin(a){if(/admin/.test(e)){return(r.isDisabled=true);}var userToAdmin=S.mode==='user'&&r.mode==='admin';S.onload={chmln:i=>{w.chmln=i;cLoaded();},editor:i=>{w.chmln._Editor=i;loaded()}};r.isEditing=true;r.mode=S.mode='admin';return load(`edit/admin/${r.accountToken}/territory.js`,{cors:true},data);function data(isRetry){var t=r.territory,u=t&&t.user,d=_dfs(),vc=t&&t.assets.chmln,ve=t&&t.assets.editor,vcs=vc?vc.split(/,/):[],ves=ve?ve.split(/,/):[],cy=vcs.length===1,ey=ves.length===1;if(userToAdmin&&r._data_a){r._data_a.forEach(d=>d[0]&&d[0].habitat&&(delete d[0].habitat,delete d[0].configs));}r._data(t);if(u&&u.id){_fe(vcs,v=>load(`assets${d}/chmln/${v}/chmln.js`,null,cy?loaded:null));_fe(ves,v=>load(`assets${d}/editor/${v}/editor.js`,null,ey?loaded:null));}else if(!isRetry){S.afterLogin=()=>load(`edit/admin/${r.accountToken}/territory.js`,{cors:true},()=>data(true));return _wp(404,'error:user:login',{account:a});}else{_wp(404,'error:account');return(r.isEditing=false);}}function cLoaded(){cCopy();loaded();}function loaded(){if(++j===2){start();edit();}}function edit(){var r=w.chmln,E=r._Editor;r._Editor=null;E();r.Editor.start();_wp(200,'building');}}function user(){var l;S.onload={chmln:i=>{w.chmln=i;start()}};r.mode=S.mode='user';r.identify=function(){r.identify_a.push(arguments);r.mode==='user'&&lt();};r.identify_a.length&&lt();/macro/.test(e)&&data();function lt(){if((acct=_afs())){return admin(acct);}else if(!l){l=true;const cId=_cfi();load(`edit/user/${r.accountToken}/${cId?`tenant/${cId}/`:''}territory.js`,null,data);}}function data(){if((acct=_afs())){return admin(acct);}var t=r.territory,a=t&&t.account,d=_dfs(),vc=t&&t.assets&&t.assets.chmln,vcs=vc?vc.split(/,/):[],cy=vcs.length===1;if(!(a&&a.id)||(t&&t.env.url_enabled==='off')){return(r.isDisabled=true);}r._data(t);_fe(vcs,v=>load(`assets${d}/chmln/${v}/chmln.js`,{defer:true},cy?start:null));}}function cCopy(){var c=w.chmln;_fe(Object.keys(r),k=>{if(r.hasOwnProperty(k)&&typeof c[k]==='undefined'){c[k]=r[k];}});c.location||(c.location=w.location.href.toString());c.now||(c.now=new Date());}function start(){cCopy();w.chmln.start();}function load(p,o,l){o||(o={});var s=d.createElement('script');s.crossOrigin=o.cors?'use-credentials':'anonymous';s.src=r.fastUrl+p;s.onload=function(){d.head.removeChild(s);l&&l()};(o.defer&&d.readyState !=='complete')?w.addEventListener('load',()=>{d.head.appendChild(s);}):d.head.appendChild(s);}function _afs(){let a;if((a=w.sessionStorage.getItem(ssAKey))){try{a=JSON.parse(a);}catch(e){}if(a&&a.token){if(_id62(a.token)===_id62(r.accountToken)){return a;}else{_wp(409,'error:account');}}return null;}}function _sdi(){const r=window.chmln;if(r.isDisabled){return r.elusive?`Chameleon is disabled with elusive=${r.elusive}`:'Domain disabled';}const s='Chameleon snippet'+(r.rootEl?'':' is not')+' loaded';const m=r.mode||(S&&S.mode);if(r.rootEl===null){return `${s},Chameleon cleared`;}let p=r.data&&r.data.profile;p='User profile'+(p?'':' is not')+' loaded'+(p?` with id=${p.id},uid=${p.get('uid')}`:'');if(m==='user'){return `${s},and running in end-user mode. ${p}`;}else if(m==='admin'){return `${s},and running in Builder mode. ${p}`;}return `${s},a state we have not explicitly handled`;}function _dfs(){return w.sessionStorage.getItem(ssDKey)?'/debug':'';}function _fe(a,i){a&&a.forEach(i);}function _wp(c,k,d){const m={code:c,kind:`chmln:${k}`};d&&(m.data=d);w.postMessage(m,'*');}function _id62(t){return t&&(t=t.split('-'))&&t[t.length-1];}function _cfi(){try{const ia=r.identify_a;return ia[ia.length-1][1].company.uid.toString().replaceAll('/','-');}catch(e){}}})(window,document,window.chmln);